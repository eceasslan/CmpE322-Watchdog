<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>CMPE322 Project 1: 322-Project1/process.cpp File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">CMPE322 Project 1
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_45847bb0d003feea36ded6ff2db14a25.html">322-Project1</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">process.cpp File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>The file which is executed by child processes.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;iostream&gt;</code><br />
<code>#include &lt;stdio.h&gt;</code><br />
<code>#include &lt;unistd.h&gt;</code><br />
<code>#include &lt;sys/types.h&gt;</code><br />
<code>#include &lt;fstream&gt;</code><br />
<code>#include &lt;fcntl.h&gt;</code><br />
<code>#include &lt;string.h&gt;</code><br />
<code>#include &lt;sys/stat.h&gt;</code><br />
<code>#include &lt;csignal&gt;</code><br />
<code>#include &lt;signal.h&gt;</code><br />
</div>
<p><a href="process_8cpp_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:abfedd0bfa008a6a9676a4d3a785912b2"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="process_8cpp.html#abfedd0bfa008a6a9676a4d3a785912b2">handle</a> (int signalNo)</td></tr>
<tr class="memdesc:abfedd0bfa008a6a9676a4d3a785912b2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handles signals received by the process.  <a href="process_8cpp.html#abfedd0bfa008a6a9676a4d3a785912b2">More...</a><br /></td></tr>
<tr class="separator:abfedd0bfa008a6a9676a4d3a785912b2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0ddf1224851353fc92bfbff6f499fa97"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="process_8cpp.html#a0ddf1224851353fc92bfbff6f499fa97">main</a> (int argc, char *argv[])</td></tr>
<tr class="memdesc:a0ddf1224851353fc92bfbff6f499fa97"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sleeps until receives a signal and when receives a signal, sends them to <a class="el" href="process_8cpp.html#abfedd0bfa008a6a9676a4d3a785912b2" title="Handles signals received by the process.">handle()</a> function.  <a href="process_8cpp.html#a0ddf1224851353fc92bfbff6f499fa97">More...</a><br /></td></tr>
<tr class="separator:a0ddf1224851353fc92bfbff6f499fa97"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a37c7e9ddb459f5c1a3c0ea882c41a56e"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="process_8cpp.html#a37c7e9ddb459f5c1a3c0ea882c41a56e">outputPath</a></td></tr>
<tr class="memdesc:a37c7e9ddb459f5c1a3c0ea882c41a56e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Contains the path of the output file.  <a href="process_8cpp.html#a37c7e9ddb459f5c1a3c0ea882c41a56e">More...</a><br /></td></tr>
<tr class="separator:a37c7e9ddb459f5c1a3c0ea882c41a56e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3f069ca3c9c137458f24c55dadef7972"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="process_8cpp.html#a3f069ca3c9c137458f24c55dadef7972">processNo</a></td></tr>
<tr class="memdesc:a3f069ca3c9c137458f24c55dadef7972"><td class="mdescLeft">&#160;</td><td class="mdescRight">Contains the process number.  <a href="process_8cpp.html#a3f069ca3c9c137458f24c55dadef7972">More...</a><br /></td></tr>
<tr class="separator:a3f069ca3c9c137458f24c55dadef7972"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a18979940912d4e27904d1501a38ca6d4"><td class="memItemLeft" align="right" valign="top"><a id="a18979940912d4e27904d1501a38ca6d4"></a>
ofstream&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="process_8cpp.html#a18979940912d4e27904d1501a38ca6d4">fdp</a></td></tr>
<tr class="memdesc:a18979940912d4e27904d1501a38ca6d4"><td class="mdescLeft">&#160;</td><td class="mdescRight">It is the file stream which deals with the output file. <br /></td></tr>
<tr class="separator:a18979940912d4e27904d1501a38ca6d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>The file which is executed by child processes. </p>
<dl class="section author"><dt>Author</dt><dd>Ece Dilara Aslan </dd></dl>
<dl class="section date"><dt>Date</dt><dd>02.01.2021</dd></dl>
<p>This source file basically receive signals and handles them. If the signal is other than SIGTERM, then code writes the related information about process number and signal value into an output file. Otherwise, code writes related information about process number and SIGTERM into an output file, and also exits the process. </p>

<p class="definition">Definition in file <a class="el" href="process_8cpp_source.html">process.cpp</a>.</p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="abfedd0bfa008a6a9676a4d3a785912b2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abfedd0bfa008a6a9676a4d3a785912b2">&#9670;&nbsp;</a></span>handle()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void handle </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>signalNo</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Handles signals received by the process. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">signalNo</td><td>The value of the received signal. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="process_8cpp_source.html#l00046">46</a> of file <a class="el" href="process_8cpp_source.html">process.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;                                 {</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160; </div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;    <a class="code" href="process_8cpp.html#a18979940912d4e27904d1501a38ca6d4">fdp</a> &lt;&lt; <span class="stringliteral">&quot;P&quot;</span> &lt;&lt; <a class="code" href="process_8cpp.html#a3f069ca3c9c137458f24c55dadef7972">processNo</a> &lt;&lt; <span class="stringliteral">&quot; received signal &quot;</span> &lt;&lt; signalNo;</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160; </div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;    <span class="keywordflow">if</span>(signalNo == 15){ <span class="comment">//the case of receiving SIGTERM</span></div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;        <a class="code" href="process_8cpp.html#a18979940912d4e27904d1501a38ca6d4">fdp</a> &lt;&lt; <span class="stringliteral">&quot;, terminating gracefully&quot;</span> &lt;&lt; endl;</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;        <a class="code" href="process_8cpp.html#a18979940912d4e27904d1501a38ca6d4">fdp</a>.close();</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;        exit(0);</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;    }</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160; </div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;    <span class="keywordflow">else</span>{ <span class="comment">//the case of receiving a signal other than SIGTERM</span></div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;        <a class="code" href="process_8cpp.html#a18979940912d4e27904d1501a38ca6d4">fdp</a> &lt;&lt; endl;</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;    }</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160; </div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;}</div>
<div class="ttc" id="aprocess_8cpp_html_a18979940912d4e27904d1501a38ca6d4"><div class="ttname"><a href="process_8cpp.html#a18979940912d4e27904d1501a38ca6d4">fdp</a></div><div class="ttdeci">ofstream fdp</div><div class="ttdoc">It is the file stream which deals with the output file.</div><div class="ttdef"><b>Definition:</b> <a href="process_8cpp_source.html#l00039">process.cpp:39</a></div></div>
<div class="ttc" id="aprocess_8cpp_html_a3f069ca3c9c137458f24c55dadef7972"><div class="ttname"><a href="process_8cpp.html#a3f069ca3c9c137458f24c55dadef7972">processNo</a></div><div class="ttdeci">int processNo</div><div class="ttdoc">Contains the process number.</div><div class="ttdef"><b>Definition:</b> <a href="process_8cpp_source.html#l00035">process.cpp:35</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a0ddf1224851353fc92bfbff6f499fa97"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0ddf1224851353fc92bfbff6f499fa97">&#9670;&nbsp;</a></span>main()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int main </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>argv</em>[]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sleeps until receives a signal and when receives a signal, sends them to <a class="el" href="process_8cpp.html#abfedd0bfa008a6a9676a4d3a785912b2" title="Handles signals received by the process.">handle()</a> function. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">argc</td><td>The number of arguments sent to the process. </td></tr>
    <tr><td class="paramname">argv</td><td>An array of arguments sent to the process. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="process_8cpp_source.html#l00068">68</a> of file <a class="el" href="process_8cpp_source.html">process.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;                                 {</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160; </div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    <a class="code" href="process_8cpp.html#a37c7e9ddb459f5c1a3c0ea882c41a56e">outputPath</a> = argv[1];</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    <a class="code" href="process_8cpp.html#a3f069ca3c9c137458f24c55dadef7972">processNo</a> = stoi(argv[2]);</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160; </div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    <a class="code" href="process_8cpp.html#a18979940912d4e27904d1501a38ca6d4">fdp</a>.open(<a class="code" href="process_8cpp.html#a37c7e9ddb459f5c1a3c0ea882c41a56e">outputPath</a>, ios::app);</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160; </div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;    <a class="code" href="process_8cpp.html#a18979940912d4e27904d1501a38ca6d4">fdp</a> &lt;&lt; <span class="stringliteral">&quot;P&quot;</span> &lt;&lt; <a class="code" href="process_8cpp.html#a3f069ca3c9c137458f24c55dadef7972">processNo</a> &lt;&lt; <span class="stringliteral">&quot; is waiting for a signal&quot;</span> &lt;&lt; endl;</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160; </div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    signal(SIGTERM, <a class="code" href="process_8cpp.html#abfedd0bfa008a6a9676a4d3a785912b2">handle</a>); <span class="comment">//when SIGTERM received, call handle() function</span></div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    signal(SIGINT, <a class="code" href="process_8cpp.html#abfedd0bfa008a6a9676a4d3a785912b2">handle</a>);  <span class="comment">//when SIGINT received, call handle() function</span></div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    signal(SIGHUP, <a class="code" href="process_8cpp.html#abfedd0bfa008a6a9676a4d3a785912b2">handle</a>);  <span class="comment">//when SIGHUP received, call handle() function</span></div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    signal(SIGILL, <a class="code" href="process_8cpp.html#abfedd0bfa008a6a9676a4d3a785912b2">handle</a>);  <span class="comment">//when SIGILL received, call handle() function</span></div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    signal(SIGTRAP, <a class="code" href="process_8cpp.html#abfedd0bfa008a6a9676a4d3a785912b2">handle</a>); <span class="comment">//when SIGTRAP received, call handle() function</span></div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    signal(SIGBUS, <a class="code" href="process_8cpp.html#abfedd0bfa008a6a9676a4d3a785912b2">handle</a>);  <span class="comment">//when SIGBUS received, call handle() function</span></div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    signal(SIGFPE, <a class="code" href="process_8cpp.html#abfedd0bfa008a6a9676a4d3a785912b2">handle</a>);  <span class="comment">//when SIGFPE received, call handle() function</span></div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    signal(SIGSEGV, <a class="code" href="process_8cpp.html#abfedd0bfa008a6a9676a4d3a785912b2">handle</a>); <span class="comment">//when SIGSEGV received, call handle() function</span></div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    signal(SIGXCPU, <a class="code" href="process_8cpp.html#abfedd0bfa008a6a9676a4d3a785912b2">handle</a>); <span class="comment">//when SIGXCPU received, call handle() function</span></div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160; </div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    <span class="keywordflow">while</span>(<span class="keyword">true</span>); <span class="comment">//sleeps until one of the signals above is received</span></div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160; </div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160; </div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;}</div>
<div class="ttc" id="aprocess_8cpp_html_a37c7e9ddb459f5c1a3c0ea882c41a56e"><div class="ttname"><a href="process_8cpp.html#a37c7e9ddb459f5c1a3c0ea882c41a56e">outputPath</a></div><div class="ttdeci">char * outputPath</div><div class="ttdoc">Contains the path of the output file.</div><div class="ttdef"><b>Definition:</b> <a href="process_8cpp_source.html#l00029">process.cpp:29</a></div></div>
<div class="ttc" id="aprocess_8cpp_html_abfedd0bfa008a6a9676a4d3a785912b2"><div class="ttname"><a href="process_8cpp.html#abfedd0bfa008a6a9676a4d3a785912b2">handle</a></div><div class="ttdeci">static void handle(int signalNo)</div><div class="ttdoc">Handles signals received by the process.</div><div class="ttdef"><b>Definition:</b> <a href="process_8cpp_source.html#l00046">process.cpp:46</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a37c7e9ddb459f5c1a3c0ea882c41a56e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a37c7e9ddb459f5c1a3c0ea882c41a56e">&#9670;&nbsp;</a></span>outputPath</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char * outputPath</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Contains the path of the output file. </p>
<p>This data is obtained from watchdog process. </p>

<p class="definition">Definition at line <a class="el" href="process_8cpp_source.html#l00029">29</a> of file <a class="el" href="process_8cpp_source.html">process.cpp</a>.</p>

</div>
</div>
<a id="a3f069ca3c9c137458f24c55dadef7972"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3f069ca3c9c137458f24c55dadef7972">&#9670;&nbsp;</a></span>processNo</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int processNo</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Contains the process number. </p>
<p>This data is obtained from watchdog process. </p>

<p class="definition">Definition at line <a class="el" href="process_8cpp_source.html#l00035">35</a> of file <a class="el" href="process_8cpp_source.html">process.cpp</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
